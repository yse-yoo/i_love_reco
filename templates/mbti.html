<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MBTIæ€§æ ¼è¨ºæ–­</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class'
    };
  </script>
  <link rel="stylesheet" href="{{ url_for('static', filename='MBTI/style.css') }}">
</head>

<body class="bg-slate-900 text-slate-100 font-sans dark:bg-white dark:text-gray-900">
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header
    class="bg-slate-800 text-white py-4 px-6 flex justify-between items-center dark:bg-gray-100 dark:text-gray-900 border-b border-slate-700 dark:border-gray-300">
<h1 class="text-2xl font-bold">
  <a href="{{ url_for('index') }}" class="flex items-center">
    <!-- ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ç”¨ãƒ­ã‚´ -->
    <img src="{{ url_for('static', filename='images/icon/logomoji_dark.png') }}"
         alt="ãƒ›ãƒ¼ãƒ "
         class="h-10 w-auto block dark:hidden hover:opacity-80 transition" />

    <!-- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ãƒ­ã‚´ -->
    <img src="{{ url_for('static', filename='images/icon/logomoji_light.png') }}"
         alt="ãƒ›ãƒ¼ãƒ ï¼ˆãƒ€ãƒ¼ã‚¯ï¼‰"
         class="h-10 w-auto hidden dark:block hover:opacity-80 transition" />
  </a>
</h1>
    <button id="menuToggle" class="text-3xl focus:outline-none">â˜°</button>
  </header>

<!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
<div id="mobileMenu"
  class="fixed top-0 right-0 w-64 h-full bg-slate-900 text-white dark:bg-white dark:text-gray-900
         p-6 flex flex-col justify-between z-50 transform translate-x-full transition-transform duration-300 shadow-2xl
         border-l border-slate-700 dark:border-gray-300">

  <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸Šéƒ¨ -->
  <div>
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-bold">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h2>
      <button id="closeMenu" class="text-2xl hover:text-rose-500">âœ•</button>
    </div>

    <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ç¾¤ -->
    <nav class="flex flex-col space-y-2 text-base">
<!-- ãƒ›ãƒ¼ãƒ  -->
<a href="{{ url_for('index') }}"
   class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-slate-800 dark:hover:bg-gray-100 hover:shadow-md transition text-base">
  <img src="{{ url_for('static', filename='images/icon/Home_NG.png') }}"
       alt="ãƒ›ãƒ¼ãƒ ï¼ˆãƒ©ã‚¤ãƒˆï¼‰"
       class="w-6 h-6 block dark:hidden" />
  <img src="{{ url_for('static', filename='images/icon/Home_LG.png') }}"
       alt="ãƒ›ãƒ¼ãƒ ï¼ˆãƒ€ãƒ¼ã‚¯ï¼‰"
       class="w-6 h-6 hidden dark:block" />
  ãƒ›ãƒ¼ãƒ 
</a>

<!-- MBTI -->
<a href="/mbti"
   class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-slate-800 dark:hover:bg-gray-100 hover:shadow-md transition text-base">
  <img src="{{ url_for('static', filename='images/icon/Mbti_NG.png') }}"
       alt="MBTIï¼ˆãƒ©ã‚¤ãƒˆï¼‰"
       class="w-6 h-6 block dark:hidden" />
  <img src="{{ url_for('static', filename='images/icon/Mbti_LG.png') }}"
       alt="MBTIï¼ˆãƒ€ãƒ¼ã‚¯ï¼‰"
       class="w-6 h-6 hidden dark:block" />
  MBTI
</a>

<!-- å±¥æ­´ -->
<a href="/logs"
   class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-slate-800 dark:hover:bg-gray-100 hover:shadow-md transition text-base">
  <img src="{{ url_for('static', filename='images/icon/Log_NG.png') }}"
       alt="å±¥æ­´ï¼ˆãƒ©ã‚¤ãƒˆï¼‰"
       class="w-6 h-6 block dark:hidden" />
  <img src="{{ url_for('static', filename='images/icon/Log_LG.png') }}"
       alt="å±¥æ­´ï¼ˆãƒ€ãƒ¼ã‚¯ï¼‰"
       class="w-6 h-6 hidden dark:block" />
  å±¥æ­´
</a>

<!-- ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ -->
<a href="javascript:void(0);" id="toggleDarkMobile"
   class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-slate-800 dark:hover:bg-gray-100 hover:shadow-md transition text-base">
  <img src="{{ url_for('static', filename='images/icon/Mode_NG.png') }}"
       alt="ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ï¼ˆãƒ©ã‚¤ãƒˆï¼‰"
       class="w-6 h-6 block dark:hidden" />
  <img src="{{ url_for('static', filename='images/icon/Mode_LG2.png') }}"
       alt="ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ï¼ˆãƒ€ãƒ¼ã‚¯ï¼‰"
       class="w-6 h-6 hidden dark:block" />
  ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿
</a>
    </nav>
  </div>





  <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒªãƒ³ã‚¯ï¼šä¸‹éƒ¨å›ºå®š -->
  <a href="{{ url_for('profile') }}"
   class="flex items-center gap-3 px-4 py-2 mt-2 rounded-lg transition duration-300
          hover:bg-slate-800 dark:hover:bg-gray-100 hover:shadow-md hover:ring-1 hover:ring-slate-600 dark:hover:ring-gray-300">

  {% if mbti_type %}
    <img src="{{ url_for('static', filename='images/' + mbti_type + '.png') }}"
         alt="{{ mbti_type }}"
         class="w-12 h-12 rounded-full border-2 border-white dark:border-gray-800 shadow-sm mb-2" />
  {% else %}
    <div class="w-12 h-12 flex items-center justify-center bg-white text-blue-600 rounded-full font-bold text-lg shadow">
      ğŸ§‘â€ğŸ’¼
    </div>
  {% endif %}

  <div class="flex flex-col">
    <span class="text-sm font-semibold truncate">{{ current_user.username }} ã•ã‚“</span>
    <span class="text-xs text-slate-400 dark:text-gray-600">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</span>
  </div>
  </a>
</div>
  <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <section class="text-center mt-20 px-6">
    <h2 class="text-3xl font-bold mb-2">MBTIæ€§æ ¼è¨ºæ–­</h2>
    <p class="text-lg text-slate-300 dark:text-gray-700">ã‚ãªãŸã®æ€§æ ¼ã‚¿ã‚¤ãƒ—ã‚’è¨ºæ–­ã—ã¾ã—ã‚‡ã†ã€‚</p>
  </section>

  <!-- ãƒ¡ã‚¤ãƒ³ -->
  <main class="max-w-2xl mx-auto p-6 bg-slate-800 mt-6 rounded-xl shadow-lg dark:bg-gray-200 dark:text-gray-900">
    <div class="progress mb-4">
      <div id="progress-bar"></div>
    </div>
    <p id="question-count" class="text-center mb-4"></p>

    <div id="question-box" class="bg-slate-700 p-6 rounded-lg shadow dark:bg-white dark:text-gray-900">
      <p id="question" class="mb-4">èª­ã¿è¾¼ã¿ä¸­...</p>
      <div class="slider-group text-center">
        <input type="range" id="slider" min="-3" max="3" step="1" value="0" class="w-full mb-4 accent-[#43a047]" />

        <div class="label-range flex justify-between text-sm text-gray-300 dark:text-gray-700 mb-4">
          <span>å…¨ããã†æ€ã‚ãªã„</span>
          <span>ã©ã¡ã‚‰ã§ã‚‚ãªã„</span>
          <span>å¼·ããã†æ€ã†</span>
        </div>
        <button onclick="submitAnswer()"
          class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded dark:bg-emerald-500 dark:hover:bg-emerald-600">
          æ¬¡ã¸
        </button>
      </div>
    </div>

    <div id="result-box"
      class="mt-8 hidden text-center bg-green-100 p-6 rounded-lg shadow dark:bg-gray-800 dark:text-green-400">
      <p id="result-type" class="text-xl font-bold mb-2 text-emerald-700 dark:text-emerald-400"></p>
      <p id="result-desc" class="mb-2 text-black "></p>
      <p id="result-match" class="font-semibold mb-2 text-black"></p>
      <div id="match-details" class="mb-4 text-left text-black"></div>

      <div class="share-buttons space-x-2">
        <button onclick="window.location.href='/'"
          class="bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded">æˆ»ã‚‹</button>
        <button onclick="location.reload()"
          class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded">ã‚‚ã†ä¸€åº¦è¨ºæ–­</button>
        <button onclick="tweetResult()"
          class="bg-sky-500 hover:bg-sky-600 text-white py-2 px-4 rounded">çµæœã‚’ãƒ„ã‚¤ãƒ¼ãƒˆ</button>
      </div>
    </div>
    
  </main>

  <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
  <footer
    class="text-center text-sm text-slate-400 dark:text-gray-600 mt-8 mb-4 p-4 border-t border-slate-700 dark:border-gray-300">
    &copy; Iâ™¡RECO 2025 K2SI
  </footer>

  <!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script src="{{ url_for('static', filename='MBTI/script.js') }}"></script>
  <script>
    if (localStorage.getItem('theme') === 'dark') {
      document.documentElement.classList.add('dark');
    }

    document.addEventListener('DOMContentLoaded', () => {
      const menuToggle = document.getElementById('menuToggle');
      const closeMenu = document.getElementById('closeMenu');
      const mobileMenu = document.getElementById('mobileMenu');
      const toggleDarkMobile = document.getElementById('toggleDarkMobile');

      menuToggle?.addEventListener('click', () => {
        mobileMenu.classList.remove("translate-x-full");
        mobileMenu.classList.add("translate-x-0");
      });

      closeMenu?.addEventListener('click', () => {
        mobileMenu.classList.remove("translate-x-0");
        mobileMenu.classList.add("translate-x-full");
      });

      toggleDarkMobile?.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
        const isDark = document.documentElement.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });
    });
  </script>
</body>

</html>